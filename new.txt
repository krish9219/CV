bash -lc '( printf "path,size_mb,size_gb,size_bytes,created,modified,owner,days_old\n"; find /search/path -type f -mtime +30 -print0 | xargs -0 -n1 -P4 sh -c '''f="$1"; bytes=$(stat -c%s "$f" 2>/dev/null || echo 0); mtime_epoch=$(stat -c %Y "$f" 2>/dev/null || echo 0); days_old=$(( ( $(date +%s) - mtime_epoch ) / 86400 )); created=$(stat -c %w "$f" 2>/dev/null || echo); if [ -z "$created" ] || [ "$created" = "-" ]; then created="N/A"; fi; modified=$(stat -c %y "$f" 2>/dev/null || echo N/A); owner=$(stat -c %U "$f" 2>/dev/null || echo N/A); mb=$(echo "$bytes" | awk '''{printf "%.2f",$1/1024/1024}'''); gb=$(echo "$bytes" | awk '''{printf "%.2f", $1/1024/1024/1024}'''); printf ""%s",%s,%s,%s,"%s","%s","%s",%s\n" "$f" "$mb" "$gb" "$bytes" "$created" "$modified" "$owner" "$days_old"''' _ {} ) > /save/location/report.csv'

cat > /tmp/report_old_files.sh <<'EOS' #!/bin/bash printf 'path,size_mb,size_gb,size_bytes,created,modified,owner,days_old\n' find /search/path -type f -mtime +30 -print0 | xargs -0 -n1 -P4 sh -c ' f="$1" bytes=$(stat -c%s "$f" 2>/dev/null || echo 0) mtime_epoch=$(stat -c %Y "$f" 2>/dev/null || echo 0) days_old=$(( ( $(date +%s) - mtime_epoch ) / 86400 )) created=$(stat -c %w "$f" 2>/dev/null || echo) if [ -z "$created" ] || [ "$created" = "-" ]; then created="N/A"; fi modified=$(stat -c %y "$f" 2>/dev/null || echo N/A) owner=$(stat -c %U "$f" 2>/dev/null || echo N/A) mb=$(echo "$bytes" | awk '''{printf "%.2f", $1/1024/1024}''') gb=$(echo "$bytes" | awk '''{printf "%.2f", $1/1024/1024/1024}''') printf ""%s",%s,%s,%s,"%s","%s","%s",%s\n" "$f" "$mb" "$gb" "$bytes" "$created" "$modified" "$owner" "$days_old" ' _ {} EOS

chmod +x /tmp/report_old_files.sh /tmp/report_old_files.sh > /save/location/report.csv

set -x

paste the single-line bash -lc '...' command here
set +x